{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\aurel\\\\OneDrive\\\\Bureau\\\\projetFinal\\\\client\\\\src\\\\pages\\\\Admin\\\\Admin.jsx\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { useEffect } from 'react';\nimport { useContext } from 'react';\nimport { AuthContext } from \"../../Context/AuthContext\";\nimport axios from \"axios\";\nimport { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Admin() {\n  _s();\n  const {\n    token,\n    settoken\n  } = useContext(AuthContext);\n  const [admin, setadmin] = useState(false);\n  const [nonAdmin, setnonAdmin] = useState(\"\");\n  const [nombreSignalMsg, setnombreSignalMsg] = useState(\"\");\n  const [nombreSignalPost, setnombreSignalPost] = useState(\"\");\n  useEffect(() => {\n    const config = {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    };\n    axios.get(\"/admin\", config).then(res => {\n      if (res.data != 'admin') {\n        return setnonAdmin(\"vous n'avez pas l'autorisation d'acceder à cette page.\");\n      }\n      setadmin(true);\n    }).catch(err => setnonAdmin(err.response.data));\n    axios.get(\"signalement/nombreMessageSignaler\", config).then(res => setnombreSignalMsg(res.data)).catch(err => console.log(err));\n    axios.get(\"signalement/nombrePostSignaler\", config).then(res => console.log(res)).catch(err => console.log(err));\n  }, []);\n  if (admin) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        to: \"/admin/signalementPost\",\n        children: [\"nombre signalements post : \", nombreSignalMsg, \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/admin/signalementMessage\",\n        children: \"nombre signalements post :\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Bienvenue sur la page d'admin. Vous pouvez faire une recherche de Post pour modifier ou supprimer ceux qui vous paraissent inapropri\\xE9s.Vous pouvez \\xE9galement acc\\xE9der aux signalements, que ce soit pour un post ou un message non conforme. Vous pouvez agir en cons\\xE9quence en ayant la possibilit\\xE9 d'envoyer un message d'alerte \\xE0 l'utilisateur ou de le bannir. S'il est bannis, l'utilisateur ne pourra alors plus se connecter et ne pourra donc ni cr\\xE9er de post ni de message.Il pourra cependant acc\\xE9der \\xE0 la page d'accueil et voir les messages et posts cr\\xE9\\xE9s.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this);\n  }\n  if (!admin) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: nonAdmin\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 11\n    }, this);\n  }\n}\n_s(Admin, \"8KhOcW0BPmXu4Q86vqz2shCDm3M=\");\n_c = Admin;\nvar _c;\n$RefreshReg$(_c, \"Admin\");","map":{"version":3,"names":["React","useEffect","useContext","AuthContext","axios","useState","Link","Admin","token","settoken","admin","setadmin","nonAdmin","setnonAdmin","nombreSignalMsg","setnombreSignalMsg","nombreSignalPost","setnombreSignalPost","config","headers","Authorization","get","then","res","data","catch","err","response","console","log"],"sources":["C:/Users/aurel/OneDrive/Bureau/projetFinal/client/src/pages/Admin/Admin.jsx"],"sourcesContent":["import React from 'react'\r\nimport { useEffect } from 'react'\r\nimport { useContext } from 'react';\r\nimport {AuthContext} from \"../../Context/AuthContext\";\r\nimport axios from \"axios\";\r\nimport { useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nexport default function Admin() {\r\n\r\n  const {token,settoken}  = useContext(AuthContext);\r\n  const [admin, setadmin] = useState(false);\r\n  const [nonAdmin, setnonAdmin] = useState(\"\");\r\n  const [nombreSignalMsg, setnombreSignalMsg] = useState(\"\");\r\n  const [nombreSignalPost, setnombreSignalPost] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    const config = {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    };\r\n\r\n    axios.get(\"/admin\",config)\r\n    .then((res)=>{\r\n      if(res.data != 'admin'){\r\n        return setnonAdmin(\"vous n'avez pas l'autorisation d'acceder à cette page.\")\r\n      }\r\n      setadmin(true);\r\n    \r\n    })\r\n    .catch((err)=>setnonAdmin(err.response.data));\r\n    \r\n    axios.get(\"signalement/nombreMessageSignaler\",config)\r\n    .then((res)=>setnombreSignalMsg(res.data))\r\n    .catch((err)=>console.log(err));\r\n\r\n    axios.get(\"signalement/nombrePostSignaler\",config)\r\n    .then((res)=>console.log(res))\r\n    .catch((err)=>console.log(err));\r\n\r\n  }, [])\r\n  \r\n  if(admin){\r\n    return (\r\n      <div >\r\n              <Link to={\"/admin/signalementPost\"}>nombre signalements post : {nombreSignalMsg} </Link>\r\n              <Link to={\"/admin/signalementMessage\"}>nombre signalements post :</Link>\r\n            \r\n            <p>\r\n              Bienvenue sur la page d'admin. Vous pouvez faire une recherche de Post pour modifier ou supprimer ceux qui vous paraissent inapropriés.Vous pouvez également accéder aux signalements,\r\n              que ce soit pour un post ou un message non conforme. Vous pouvez agir en conséquence en ayant la possibilité d'envoyer un message d'alerte à l'utilisateur ou de le bannir.\r\n              S'il est bannis, l'utilisateur ne pourra alors plus se connecter et ne pourra donc ni créer de post ni de message.Il pourra cependant accéder à la page d'accueil et voir les messages et posts créés.\r\n             </p>\r\n      </div>\r\n    )\r\n  }\r\n    if(!admin){\r\n      return(\r\n          <div>\r\n              {nonAdmin}\r\n          </div>\r\n        )\r\n    \r\n  }\r\n}\r\n"],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,SAAS,QAAQ,OAAO;AACjC,SAASC,UAAU,QAAQ,OAAO;AAClC,SAAQC,WAAW,QAAO,2BAA2B;AACrD,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,QAAQ,QAAQ,OAAO;AAChC,SAASC,IAAI,QAAQ,kBAAkB;AAAC;AAExC,eAAe,SAASC,KAAK,GAAG;EAAA;EAE9B,MAAM;IAACC,KAAK;IAACC;EAAQ,CAAC,GAAIP,UAAU,CAACC,WAAW,CAAC;EACjD,MAAM,CAACO,KAAK,EAAEC,QAAQ,CAAC,GAAGN,QAAQ,CAAC,KAAK,CAAC;EACzC,MAAM,CAACO,QAAQ,EAAEC,WAAW,CAAC,GAAGR,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACS,eAAe,EAAEC,kBAAkB,CAAC,GAAGV,QAAQ,CAAC,EAAE,CAAC;EAC1D,MAAM,CAACW,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGZ,QAAQ,CAAC,EAAE,CAAC;EAE5DJ,SAAS,CAAC,MAAM;IACd,MAAMiB,MAAM,GAAG;MACbC,OAAO,EAAE;QACPC,aAAa,EAAG,UAASZ,KAAM;MACjC;IACF,CAAC;IAEDJ,KAAK,CAACiB,GAAG,CAAC,QAAQ,EAACH,MAAM,CAAC,CACzBI,IAAI,CAAEC,GAAG,IAAG;MACX,IAAGA,GAAG,CAACC,IAAI,IAAI,OAAO,EAAC;QACrB,OAAOX,WAAW,CAAC,wDAAwD,CAAC;MAC9E;MACAF,QAAQ,CAAC,IAAI,CAAC;IAEhB,CAAC,CAAC,CACDc,KAAK,CAAEC,GAAG,IAAGb,WAAW,CAACa,GAAG,CAACC,QAAQ,CAACH,IAAI,CAAC,CAAC;IAE7CpB,KAAK,CAACiB,GAAG,CAAC,mCAAmC,EAACH,MAAM,CAAC,CACpDI,IAAI,CAAEC,GAAG,IAAGR,kBAAkB,CAACQ,GAAG,CAACC,IAAI,CAAC,CAAC,CACzCC,KAAK,CAAEC,GAAG,IAAGE,OAAO,CAACC,GAAG,CAACH,GAAG,CAAC,CAAC;IAE/BtB,KAAK,CAACiB,GAAG,CAAC,gCAAgC,EAACH,MAAM,CAAC,CACjDI,IAAI,CAAEC,GAAG,IAAGK,OAAO,CAACC,GAAG,CAACN,GAAG,CAAC,CAAC,CAC7BE,KAAK,CAAEC,GAAG,IAAGE,OAAO,CAACC,GAAG,CAACH,GAAG,CAAC,CAAC;EAEjC,CAAC,EAAE,EAAE,CAAC;EAEN,IAAGhB,KAAK,EAAC;IACP,oBACE;MAAA,wBACQ,QAAC,IAAI;QAAC,EAAE,EAAE,wBAAyB;QAAA,0CAA6BI,eAAe;MAAA;QAAA;QAAA;QAAA;MAAA,QAAS,eACxF,QAAC,IAAI;QAAC,EAAE,EAAE,2BAA4B;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QAAkC,eAE1E;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QAIK;IAAA;MAAA;MAAA;MAAA;IAAA,QACL;EAEV;EACE,IAAG,CAACJ,KAAK,EAAC;IACR,oBACI;MAAA,UACKE;IAAQ;MAAA;MAAA;MAAA;IAAA,QACP;EAGd;AACF;AAAC,GAzDuBL,KAAK;AAAA,KAALA,KAAK;AAAA;AAAA"},"metadata":{},"sourceType":"module"}